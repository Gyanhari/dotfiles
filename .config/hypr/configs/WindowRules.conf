# === 1. AESTHETICS (OPACITY & BLUR) ===
# Using lower opacity to let the heavy blur defined in Decorations.conf shine through.
# Terminals - Versatile Tiled Terminal (0.9 opacity)
windowrule = opacity 0.90 0.90, match:class ^(kitty)$
windowrule = opacity 0.90 0.90, match:class ^(alacritty)$

# Text Editors / IDEs (Slightly less transparent for readability)
windowrule = opacity 0.92 0.92, workspace 2, match:class ^(Code)$
windowrule = opacity 0.92 0.92, match:class ^(codium-url-handler)$
windowrule = opacity 0.92 0.92, workspace 2, match:class ^(jetbrains-.+)$

# Communication & Media (Glassy look)
windowrule = opacity 0.90 0.90, workspace 4, match:class ^(discord)$
windowrule = opacity 0.90 0.90, workspace 5, match:class ^(Spotify)$
windowrule = opacity 0.90 0.90, workspace 4, match:class ^(vesktop)$

# File Managers
windowrule = opacity 0.85 0.85, match:class ^(thunar)$
windowrule = opacity 0.85 0.85, match:class ^(nemo)$
windowrule = opacity 0.85 0.85, match:class ^(org.kde.dolphin)$


# === 2. FLOATING "HUD" WINDOWS (System Panels) ===
windowrule = float on, size 800 600, center on, match:class ^(pavucontrol)$

windowrule = float on, size 800 600, match:class ^(blueman-manager)$

windowrule = float on, match:class ^(nm-connection-editor)$

windowrule = float on, dim_around on, match:class ^(org.kde.polkit-kde-authentication-agent-1)$

# Image and Video Viewers should float by default
windowrule = float on, match:class ^(eog)$
windowrule = float on, match:class ^(imv)$
windowrule = float on, match:class ^(vlc)$
windowrule = float on, match:class ^(mpv)$


# === 3. FLOATING SCRATCHPAD TERMINAL (Keybind triggered) ===
windowrule = float on, size 800 500, center on, pin on, opacity 1.0 override 1.0 override, border_color rgb(00ff9c) override, workspace special:scratchpad, match:title ^(scratchpad)$
# ALWAYS send kitty scratchpad to special workspace


# === 4. PICTURE-IN-PICTURE (PiP) TWEAKS ===
# Makes PiP videos stick to the bottom-right corner and uses a cyan border.
windowrule = float on, pin on, move ((monitor_w*1)-window_w-20) ((monitor_h*1)-h-20), size (monitor_w*0.4) (monitor_h*0.4), no_initial_focus on, opacity 1.0 1.0, border_color rgb(00e8ff), match:title ^(Picture-in-Picture)$


# === 5. WORKFLOW AUTOMATION (Tiled Apps) ===
# Versatile Terminal is NOT locked to a workspace.
windowrule = workspace 1, idle_inhibit fullscreen, match:class ^(firefox)$
windowrule = workspace 1, match:class ^(zen)$
windowrule = workspace 1, idle_inhibit fullscreen, match:class ^(google-chrome)$
windowrule = workspace 1, match:class ^(brave-browser)$



windowrule = workspace 3, match:class ^(GNS3)$
windowrule = workspace 3, match:class ^(PacketTracer)$


windowrule = workspace 4, match:class ^(*viber*)$
windowrule = workspace 4, match:class ^(burp-StartBurp)$

windowrule = workspace 6, match:class ^(steam)$


# === 6. GAME/UTILITY FIXES ===

# Steam Fixes
windowrule = float on, match:class ^(steam)$, match:title ^(Friends List)$
windowrule = float on, match:class ^(steam)$, match:title ^(Steam - News)$
windowrule = float on, match:class ^(steam)$, match:title ^(.*Settings.*)$
windowrule = stay_focused on, min_size 1 1, match:title ^()$, match:class ^(steam)$

# Screen Sharing Fix (xwaylandvideobridge)
windowrule = opacity 0.0 override 0.0 override, no_anim on, no_initial_focus on, max_size 1 1, no_blur on, match:class ^(xwaylandvideobridge)$

# -----------------------------------------------------
# === 7. LAYOUT & TILING TWEAKS (Dwindle/Master) ===
# -----------------------------------------------------

# Ignore maximize requests from apps. Essential for Dwindle/Master layouts
# to prevent apps from acting like they are in a normal DE.
windowrule = suppress_event maximize, match:class .*

# Fix XWayland apps sometimes creating invisible windows that steal focus
windowrule = no_focus on, match:class ^$, match:title ^$, match:xwayland 1, match:float 1, match:fullscreen 0, match:pin 0

# === PSEUDOTILING (The "Cyberpunk Data-Pad" Look) ===
# Great for calculators, color pickers, or small tools so they don't stretch across the screen.
windowrule = float on, match:class ^(org.kde.kcalc)$
windowrule = float on, match:class ^(galculator)$
windowrule = float on, match:class ^(hyprland-share-picker)$
windowrule = float on, match:class ^(lxqt-policykit-agent)$

# === DIALOGS & MENUS ===
# Ensure file dialogs and context menus don't get tiled or blurred weirdly
windowrule = float on, center on, match:title ^(Open File)$
windowrule = float on, match:title ^(Select a File)$
windowrule = float on, match:title ^(Choose wallpaper)$
windowrule = float on, match:title ^(Open Folder)$
windowrule = float on, center on, match:title ^(Save As)$
windowrule = float on, match:title ^(Rename)$
windowrule = float on, match:title ^(Enter the new name)$
windowrule = float on, match:title ^(Library)$
windowrule = float on, match:title ^(File Operation Progress)$

# Only floating windows get the "neon glow" shadow
windowrule = no_shadow on, match:float 0

# Make menus opaque (readable) even if the app is transparent
windowrule = opacity 1.0 override 1.0 override, no_blur on, match:title ^(.*Menu.*)$
windowrule = opacity 1.0 override 1.0 override, match:title ^(.*Popup.*)$

# XWayland Video Bridge (Screen sharing fix specific rules)
# This ensures the bridge is invisible and doesn't mess up your layout




windowrule = no_initial_focus on, match:title ^(GNS3)
windowrule = no_initial_focus on, match:title ^(PacketTracer)


windowrule = float on, size 100 500, match:class ^(dev.musagy.hypremoji)$
